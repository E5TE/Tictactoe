(()=>{"use strict";var t,e,i,s={970:function(t,e,i){var s,r=this&&this.__extends||(s=function(t,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},s(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}s(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0}),e.TicTacToe=void 0;var o=i(610),n=i(722),a=function(t){function e(e){var i=t.call(this)||this;return i.state=o.Fix.STATE_INTRO,i.UI=new n.UserInterface(e),i}return r(e,t),e.prototype.start=function(){this.UI.showWelcomeSign(),this.UI.showBinaryButtons("no","yes",this.cursorBinary)},e.prototype.updateButtons=function(){switch(this.state){case o.Fix.STATE_INTRO:case o.Fix.STATE_RESULTS:this.UI.showBinaryButtons("no","yes",this.cursorBinary);break;case o.Fix.STATE_CHOOSE_MODE:this.UI.showBinaryButtons(" P2","CPU",this.cursorBinary);break;case o.Fix.STATE_CHOOSE_SYMBOL:this.UI.showBinaryButtons("X","O",this.cursorBinary)}},e.prototype.keyYes=function(){var t=this;switch(this.state){case o.Fix.STATE_PLAYING:0==this.map[this.cursorPos-1]&&this.playTurn();break;case o.Fix.STATE_INTRO:case o.Fix.STATE_RESULTS:0==this.cursorBinary?this.exit():(this.state==o.Fix.STATE_RESULTS&&(window.playAds(),console.log("Trying to play the add")),this.resetGameSettings(),this.state=o.Fix.STATE_CHOOSE_MODE,this.UI.showChooseGameMode(),this.updateButtons());break;case o.Fix.STATE_CHOOSE_MODE:0==this.cursorBinary?this.mode=o.Fix.MODE_MULTI_PLAYER:this.mode=o.Fix.MODE_SINGLE_PLAYER,this.state=o.Fix.STATE_CHOOSE_SYMBOL,this.UI.showChooseSymbol(),this.updateButtons();break;case o.Fix.STATE_CHOOSE_SYMBOL:0==this.cursorBinary?(this.playerOne=this.X,this.playerTwo=this.playerOne===this.X?this.O:this.X):(this.playerOne=this.O,this.playerTwo=this.playerOne===this.O?this.X:this.O),this.AI=this.playerTwo,this.whoStart();var e=this.turn===this.playerOne?"PLAYER 1":this.mode===o.Fix.MODE_SINGLE_PLAYER?"COMPUTER":"PLAYER 2";this.UI.clearBoard(),this.UI.drawBoard(),this.UI.gameStart(e),this.state=o.Fix.STATE_PLAYING,this.gameIsOver=!1,this.winnerName="",setTimeout((function(){t.UI.fillBoard(t.map),t.turn===t.AI&&t.mode===o.Fix.MODE_SINGLE_PLAYER?(t.playTurn(),t.UI.fillBoard(t.map)):(t.firstTurn=!1,t.updateCursor())}),1e3)}},e.prototype.keyNo=function(){this.state!=o.Fix.STATE_INTRO&&this.state!=o.Fix.STATE_RESULTS||this.exit()},e.prototype.keyUp=function(){if(this.state==o.Fix.STATE_PLAYING){var t=this.cursorPos;this.cursorPos-=3,this.cursorPos<1&&(this.cursorPos=6+t),this.updateCursor()}else this.cursorBinary=!this.cursorBinary,this.UI.updateView(),this.updateButtons()},e.prototype.keyDown=function(){if(this.state==o.Fix.STATE_PLAYING){var t=this.cursorPos;this.cursorPos+=3,this.cursorPos>9&&(this.cursorPos=t-6),this.updateCursor()}else this.cursorBinary=!this.cursorBinary,this.UI.updateView(),this.updateButtons()},e.prototype.keyLeft=function(){if(this.state==o.Fix.STATE_PLAYING){var t=this.cursorPos;this.cursorPos--,0!=this.cursorPos&&3!=this.cursorPos&&6!=this.cursorPos||(this.cursorPos=t+2),this.updateCursor()}else this.cursorBinary=!this.cursorBinary,this.UI.updateView(),this.updateButtons()},e.prototype.keyRight=function(){if(this.state==o.Fix.STATE_PLAYING){var t=this.cursorPos;this.cursorPos++,4!=this.cursorPos&&7!=this.cursorPos&&10!=this.cursorPos||(this.cursorPos=t-2),this.updateCursor()}else this.cursorBinary=!this.cursorBinary,this.UI.updateView(),this.updateButtons()},e.prototype.updateCursor=function(){this.UI.fillBoard(this.map),this.UI.showCursor(o.Fix.POSITIONS[this.cursorPos-1])},e.prototype.playTurn=function(){var t=this;this.mode===o.Fix.MODE_MULTI_PLAYER?this.turn===this.playerOne?this.movePlayerOne():this.turn===this.playerTwo&&this.movePlayerTwo():this.mode===o.Fix.MODE_SINGLE_PLAYER&&(this.turn===this.playerOne?(this.movePlayerOne(),this.turn===this.AI&&setTimeout((function(){t.computerPlay(),t.UI.fillBoard(t.map),t.nextTurn()}),400)):this.turn===this.AI&&this.firstTurn&&(this.firstTurn=!1,setTimeout((function(){t.computerPlay(),t.UI.fillBoard(t.map),t.nextTurn()}),400)))},e.prototype.movePlayerOne=function(){this.player=this.playerOne,this.map[this.cursorPos-1]=this.player,this.updateCursor(),this.nextTurn()},e.prototype.movePlayerTwo=function(){this.player=this.playerTwo,this.map[this.cursorPos-1]=this.player,this.updateCursor(),this.nextTurn()},e.prototype.nextTurn=function(){this.playerTwo=this.mode===o.Fix.MODE_SINGLE_PLAYER?this.AI:this.playerTwo,this.player=this.player===this.playerOne?this.playerTwo:this.playerOne,this.turn=this.player,this.checkWin(),1==this.gameIsOver&&(this.state=o.Fix.STATE_RESULTS,this.UI.gameEnd(this.winnerName),this.UI.showBinaryButtons("no","yes",this.cursorBinary)),this.turnCount++},e.prototype.exit=function(){window.location.href="https://google.com"},e}(i(153).GameLogic);e.TicTacToe=a},153:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.GameLogic=void 0;var s=i(610),r=function(){function t(){this.winnPatterns=[[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]],this.X=1,this.O=-1,this.map=[0,0,0,0,0,0,0,0,0],this.cursorPos=1,this.cursorBinary=!0,this.player=0,this.playerOne=0,this.playerTwo=0,this.AI=0,this.mode="",this.turn=0,this.turnCount=1,this.firstTurn=!0,this.gameIsOver=!0,this.winnerName=""}return t.prototype.whoStart=function(){this.mode===s.Fix.MODE_SINGLE_PLAYER?this.turn=Math.round(Math.random()+.4)?this.AI:this.playerOne:this.mode===s.Fix.MODE_MULTI_PLAYER&&(this.turn=Math.round(Math.random())?this.playerOne:this.playerTwo),this.player=this.turn},t.prototype.computerPlay=function(){var t=this,e=Math.floor(Math.random()*this.map.length),i=[0,2,6,8],s=function(){var e=t.winnPatterns.map((function(e){return{cpu:{winMoves:e.map((function(e){var i;return(i={})[e]=t.map[e],i})),score:e.reduce((function(e,i){return t.map[i]===t.AI?e+5:0===t.map[i]?e:e-100}),0)},opponent:{winMoves:e.map((function(e){var i;return(i={})[e]=t.map[e],i})),score:e.reduce((function(e,i){return t.map[i]===t.playerOne?e+5:0===t.map[i]?e:e-100}),0)}}})),i={score:-1/0},s={score:-1/0};e.forEach((function(t){var e=t.cpu.winMoves.some((function(t){return 0===Object.values(t)[0]})),r=t.opponent.winMoves.some((function(t){return 0===Object.values(t)[0]}));i=i.score<t.cpu.score&&e?t.cpu:i,s=s.score<t.opponent.score&&r?t.opponent:s}));var r=i.winMoves.filter((function(e){return Object.values(e)[0]!==t.playerOne&&Object.values(e)[0]!==t.AI})).map((function(t){return Object.keys(t)[0]})),o=s.winMoves.filter((function(e){return Object.values(e)[0]!==t.playerOne&&Object.values(e)[0]!==t.AI})).map((function(t){return Object.keys(t)[0]}));return{bestMoveCPU:i,bestMoveOpponent:s,nextPossibleMovesCPU:r,nextPossibleMovesOpponent:o}}(),r=s.bestMoveCPU,o=s.bestMoveOpponent,n=s.nextPossibleMovesCPU,a=s.nextPossibleMovesOpponent;e=1===this.turnCount?i[Math.floor(Math.random()*i.length)]:o.score<=5||10===r.score?n[Math.floor(Math.random()*n.length)]:a[Math.floor(Math.random()*a.length)],this.map[e]=this.player},t.prototype.checkWin=function(){var t=this;this.playerTwo=this.mode===s.Fix.MODE_SINGLE_PLAYER?this.AI:this.playerTwo;for(var e=new Set(this.map.map((function(e,i){return e===t.playerOne?i:""}))),i=new Set(this.map.map((function(e,i){return e===t.playerTwo?i:""}))),r=0;r<this.winnPatterns.length;r++){var o=this.winnPatterns[r].every((function(t){return e.has(t)})),n=this.winnPatterns[r].every((function(t){return i.has(t)}));if(o){this.gameIsOver=!0,this.winnerName=this.mode===s.Fix.MODE_SINGLE_PLAYER?"YOU":"PLAYER 1";break}if(n){this.gameIsOver=!0,this.mode===s.Fix.MODE_SINGLE_PLAYER?this.winnerName="COMPUTER":this.mode===s.Fix.MODE_MULTI_PLAYER&&(this.winnerName="PLAYER 2");break}r===this.winnPatterns.length-1&&9===this.turnCount&&(n||n||(this.gameIsOver=!0,this.winnerName="None"))}},t.prototype.resetGameSettings=function(){this.turn=this.AI=this.player=this.playerOne=this.playerTwo=0,this.map=[0,0,0,0,0,0,0,0,0],this.mode="",this.turnCount=1,this.firstTurn=!0,this.gameIsOver=!0,this.winnerName=""},t}();e.GameLogic=r},722:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.UserInterface=void 0;var s=i(610),r=function(){function t(t){this.lastState=this.showWelcomeSign,this.winner="",this.ctx=t}return t.prototype.updateView=function(){""==this.winner?this.lastState():this.gameEnd(this.winner)},t.prototype.clearBoard=function(){this.ctx.clearRect(0,0,s.Fix.WIDTH,s.Fix.HEIGHT)},t.prototype.showWelcomeSign=function(){this.showMenu(),this.drawText(s.Fix.CENTER-250,s.Fix.TOP+150,"#000","rgba(0,0,0,0.3)",12,"bold","35px","Racer","Do you want to play?")},t.prototype.showChooseGameMode=function(){this.lastState=this.showChooseGameMode,this.winner="",this.showMenu(),this.drawText(s.Fix.CENTER-260,s.Fix.TOP+150,"#000","rgba(0,0,0,0.3)",12,"bold","35px","Racer","Choose your opponent")},t.prototype.showChooseSymbol=function(){this.lastState=this.showChooseSymbol,this.winner="",this.showMenu(),this.drawText(s.Fix.CENTER-250,s.Fix.TOP+150,"#000","rgba(0,0,0,0.3)",12,"bold","35px","Racer","Choose your symbol")},t.prototype.gameEnd=function(t){this.winner=t;var e=25*t.length;this.drawRectRounded(s.Fix.CENTER-325,s.Fix.TOP-120,600,520,20,10,5,"#6c6c6c6c","#505050","rgba(83, 24, 187, 0.8)"),this.drawText(s.Fix.CENTER-310,s.Fix.TOP-30,"#000","rgba(0,0,0,0.3)",12,"bold","50px","Racer","The Game is Over"),this.drawText(s.Fix.CENTER-100,s.Fix.TOP+40,"#000","rgba(0,0,0,0.3)",12,"bold","40px","Racer","Winner:"),this.drawText(s.Fix.CENTER-e,s.Fix.TOP+115,"white","black",12,"bold","50px","Racer",t),this.drawText(s.Fix.CENTER-300,s.Fix.TOP+180,"#000","rgba(0,0,0,0.3)",12,"bold","26px","Racer","Whould you like to play again?")},t.prototype.gameStart=function(t){var e=10*t.length;this.drawText(s.Fix.CENTER-110,s.Fix.TOP+45,"#000","#fff",12,"bold","30px","Racer","Will Start"),this.drawText(s.Fix.CENTER-e,s.Fix.TOP+80,"#000","#fff",12,"bold","25px","Racer",t)},t.prototype.showMenu=function(){this.clearBoard(),this.drawRectRounded(s.Fix.CENTER-325,s.Fix.HEIGHT/2-325,650,650,20,10,5,"#6c6c6c6c","#505050","rgba(83, 24, 187, 0.8)"),this.drawText(s.Fix.CENTER-300,s.Fix.TOP-30,"#000","rgba(0,0,0,0.3)",12,"bold","40px","Racer","Welcome To the game"),this.drawText(s.Fix.CENTER-175,s.Fix.TOP+60,"#000","rgba(0,0,0,0.3)",12,"bold","50px","Racer","Tic-Tac-Toe")},t.prototype.showBinaryButtons=function(t,e,i){i?(this.drawButtonUnselected(400,500,t),this.drawButtonSelected(740,500,e)):(this.drawButtonSelected(400,500,t),this.drawButtonUnselected(740,500,e))},t.prototype.showCursor=function(t){this.ctx.save();var e=t.x+30,i=t.y+30;this.ctx.globalAlpha=.5,this.ctx.fillStyle="white",this.ctx.fillRect(e,i,180,180),this.ctx.restore(),this.ctx.globalAlpha=1},t.prototype.drawBoard=function(){this.ctx.save(),this.ctx.strokeStyle="rgba(0,0,0,0.2)",this.ctx.lineWidth=6,this.ctx.lineCap="round",this.ctx.beginPath(),this.ctx.moveTo(s.Fix.LEFT+s.Fix.CELL,10),this.ctx.lineTo(s.Fix.LEFT+s.Fix.CELL,s.Fix.HEIGHT-10),this.ctx.moveTo(s.Fix.LEFT+2*s.Fix.CELL,10),this.ctx.lineTo(s.Fix.LEFT+2*s.Fix.CELL,s.Fix.HEIGHT-10),this.ctx.moveTo(s.Fix.LEFT+10,s.Fix.CELL),this.ctx.lineTo(s.Fix.LEFT+s.Fix.HEIGHT-10,s.Fix.CELL),this.ctx.moveTo(s.Fix.LEFT+10,2*s.Fix.CELL),this.ctx.lineTo(s.Fix.LEFT+s.Fix.HEIGHT-10,2*s.Fix.CELL),this.ctx.stroke(),this.ctx.closePath(),this.ctx.restore()},t.prototype.fillBoard=function(t){this.clearBoard(),this.drawBoard();for(var e=0;e<t.length;e++)switch(t[e]){case 1:this.drawX(s.Fix.POSITIONS[e]);break;case-1:this.drawO(s.Fix.POSITIONS[e])}},t.prototype.drawX=function(t){var e=t.x+120,i=t.y+120;this.ctx.beginPath(),this.ctx.strokeStyle="gray",this.ctx.lineCap="round",this.ctx.lineWidth=10,this.ctx.moveTo(e-80,i-80),this.ctx.lineTo(e+80,i+80),this.ctx.moveTo(e+80,i-80),this.ctx.lineTo(e-80,i+80),this.ctx.stroke()},t.prototype.drawO=function(t){var e=t.x+120,i=t.y+120;this.ctx.beginPath(),this.ctx.strokeStyle="white",this.ctx.lineWidth=10,this.ctx.arc(e,i,80,2*Math.PI,0,!1),this.ctx.stroke()},t.prototype.drawRectRounded=function(t,e,i,s,r,o,n,a,h,c){this.ctx.save(),this.ctx.shadowBlur=n,this.ctx.lineWidth=o,this.ctx.fillStyle=a,this.ctx.shadowColor=c,this.ctx.strokeStyle=h,this.ctx.beginPath(),this.ctx.moveTo(t,e+r),this.ctx.lineTo(t,e+s-r),this.ctx.arcTo(t,e+s,t+r,e+s,r),this.ctx.lineTo(t+i-r,e+s),this.ctx.arcTo(t+i,e+s,t+i,e+s-r,r),this.ctx.lineTo(t+i,e+r),this.ctx.arcTo(t+i,e,t+i-r,e,r),this.ctx.lineTo(t+r,e),this.ctx.arcTo(t,e,t,e+r,r),this.ctx.stroke(),this.ctx.fill(),this.ctx.restore()},t.prototype.drawText=function(t,e,i,s,r,o,n,a,h){this.ctx.save(),this.ctx.lineWidth=3,this.ctx.shadowColor=s,this.ctx.shadowBlur=r,this.ctx.fillStyle=i,this.ctx.font="".concat(o," ").concat(n," ").concat(a),this.ctx.fillText(h,t,e),this.ctx.restore()},t.prototype.drawButtonUnselected=function(t,e,i){this.drawRectRounded(t,e,150,100,25,10,10,"white","black","gray");var s=t+(75-48*i.length/2),r=e+75;this.drawText(s,r,"black","white",5,"bold","58px","Racer",i)},t.prototype.drawButtonSelected=function(t,e,i){this.drawRectRounded(t,e,150,100,25,10,10,"black","white","gray");var s=t+(75-48*i.length/2),r=e+75;this.drawText(s,r,"white","black",5,"bold","58px","Racer",i)},t}();e.UserInterface=r},610:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Fix=void 0;var i=function(){function t(){}return t.STATE_PLAYING="STATE_PLAYING",t.STATE_INTRO="STATE_INTRO",t.STATE_RESULTS="STATE_RESULTS",t.STATE_CHOOSE_MODE="STATE_CHOOSE_MODE",t.STATE_CHOOSE_SYMBOL="STATE_CHOOSE_SYMBOL",t.MODE_SINGLE_PLAYER="singlePlayer",t.MODE_MULTI_PLAYER="multiPlayer",t.WIDTH=1280,t.HEIGHT=720,t.CELL=240,t.LEFT=280,t.CENTER=640,t.TOP=240,t.POSITIONS=[{x:t.LEFT,y:0},{x:t.LEFT+t.CELL,y:0},{x:t.LEFT+2*t.CELL,y:0},{x:t.LEFT,y:t.CELL},{x:t.LEFT+t.CELL,y:t.CELL},{x:t.LEFT+2*t.CELL,y:t.CELL},{x:t.LEFT,y:2*t.CELL},{x:t.LEFT+t.CELL,y:2*t.CELL},{x:t.LEFT+2*t.CELL,y:2*t.CELL}],t}();e.Fix=i}},r={};t=function t(e){var i=r[e];if(void 0!==i)return i.exports;var o=r[e]={exports:{}};return s[e].call(o.exports,o,o.exports,t),o.exports}(970),e=document.getElementById("TicTacToe").getContext("2d"),(i=new t.TicTacToe(e)).start(),document.addEventListener("keyup",(function(t){switch(t.key){case"Enter":case" ":case"y":case"Y":i.keyYes();break;case"Escape":case"Backspace":case"n":case"N":i.keyNo();break;case"ArrowUp":i.keyUp();break;case"ArrowDown":i.keyDown();break;case"ArrowLeft":i.keyLeft();break;case"ArrowRight":i.keyRight();break;default:return}}))})();
//# sourceMappingURL=game.js.map